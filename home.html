<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Contact — 2026 Grand Court of Pennsylvania - Order of the Amaranth">
  <link rel="icon" href="assets/img/favicon.svg" type="image/svg+xml" />
  <link rel="stylesheet" href="assets/css/styles.css?v=contact-v1" />
  <title>Contact Us</title>

  <style>
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 1rem;
      color: #1f2937;
    }
    .contact-title {
      font-size: 2.1rem;
      font-weight: 800;
      text-align: center;
      margin: 1.5rem 0 0.5rem;
    }
    .contact-intro {
      font-size: 1rem;
      max-width: 640px;
      margin: 0 auto 1.5rem;
      text-align: center;
      color: #374151;
    }
    .panel {
      margin: .25rem auto 1.25rem;
      max-width: 680px;
      background: rgba(255,255,255,0.95);
      border: 1px solid rgba(229,231,235,0.9);
      border-radius: 12px;
      padding: 1.25rem 1.5rem;
      box-shadow: 0 2px 10px rgba(0,0,0,.06);
    }
    form {
      display: grid;
      grid-template-columns: 1fr;
      gap: 0.75rem 1rem;
    }
    .field label { font-weight:600; }
    .field input, .field select, .field textarea {
      width: 100%;
      padding: .45rem .55rem;
      border: 1px solid #d1d5db;
      border-radius: 6px;
    }
    .actions { text-align: right; }
    .btn-primary {
      padding: .55rem 1.2rem;
      border-radius: 999px;
      border: none;
      background: #860000;
      color: #fff;
      font-weight: 600;
    }
    .status.ok { color:#065f46; }
    .status.err { color:#b91c1c; }
    @media (min-width:700px){
      form.two-column { grid-template-columns:1fr 1fr; }
      .full-width { grid-column:1/-1; }
    }
  </style>
</head>

<body>
  <!-- Wallpaper -->
  <div class="wallpaper" style="--wallpaper: url('/assets/img/wallpaper.jpg')"></div>

  <!-- Header / Nav -->
  <header class="site-header">
    <div class="container header-inner">
      <a class="logo" href="home.html">
        <img src="assets/img/logo.svg" alt="Logo">
        <span>Order of the Amaranth</span>
      </a>
      <nav class="site-nav nav">
        <a href="home.html">Home</a>
        <a href="banquet.html">Banquets</a>
        <a href="grand-court-addons.html">Grand Court Add-Ons</a>
        <a href="product-catalog.html" data-catalog-link>Product Catalog</a>
        <a href="order.html">Order</a>
        <span class="nav-current">Contact</span>
      </nav>
    </div>
  </header>

  <main class="container mt-lg">
    <h1 class="contact-title">Contact Us</h1>
    <p class="contact-intro">
      Use this form for questions about registrations, banquets, add-ons, the product catalog,
      or general inquiries about the 2026 Grand Court Session.
    </p>

    <section class="panel">
      <form id="contact-form" class="two-column" novalidate>
        <div class="field">
          <label for="cf-name">Your Name *</label>
          <input id="cf-name" name="name" type="text" required />
        </div>

        <div class="field">
          <label for="cf-email">Email Address *</label>
          <input id="cf-email" name="email" type="email" required />
        </div>

        <div class="field">
          <label for="cf-phone">Phone (optional)</label>
          <input id="cf-phone" name="phone" type="tel" />
        </div>

        <div class="field">
          <label for="cf-topic">What is this about? *</label>
          <select id="cf-topic" name="topic" required>
            <option value="">Choose…</option>
            <option value="banquets">Banquets / meal choices</option>
            <option value="addons">Grand Court add-ons</option>
            <option value="catalog">Product catalog</option>
            <option value="order">Order / checkout issues</option>
            <option value="website">Website problem</option>
            <option value="general">General question</option>
          </select>
        </div>

        <div class="field">
          <label for="cf-page">Which page were you on? (optional)</label>
          <select id="cf-page" name="page">
            <option value="">Not sure / Other</option>
            <option value="home">Home</option>
            <option value="banquet">Banquets</option>
            <option value="addons">Grand Court Add-Ons</option>
            <option value="catalog">Product Catalog</option>
            <option value="order">Order</option>
          </select>
        </div>

        <div class="field">
          <label for="cf-item">Item name or ID (optional)</label>
          <input id="cf-item" name="item" type="text" />
        </div>

        <div class="field full-width">
          <label for="cf-message">Your Message *</label>
          <textarea id="cf-message" name="message" required></textarea>
        </div>

        <div class="actions full-width">
          <button type="submit" class="btn-primary" id="cf-submit">Send Message</button>
          <div class="status" id="cf-status"></div>
        </div>
      </form>
    </section>

    <p class="contact-intro" style="font-size:0.9rem;">
      Prefer email?  
      <a href="mailto:pa_sessions@yahoo.com">pa_sessions@yahoo.com</a>
    </p>
  </main>

  <!-- JS to send form to /api/router?action=contact_form -->
  <script>
  (function(){
    const form = document.getElementById('contact-form');
    const btn = document.getElementById('cf-submit');
    const status = document.getElementById('cf-status');

    form.addEventListener('submit', async e => {
      e.preventDefault();

      status.textContent = '';
      status.className = 'status';

      const data = {
        name:    form.name.value.trim(),
        email:   form.email.value.trim(),
        phone:   form.phone.value.trim(),
        topic:   form.topic.value,
        page:    form.page.value,
        item:    form.item.value.trim(),
        message: form.message.value.trim()
      };

      if (!data.name || !data.email || !data.topic || !data.message) {
        status.textContent = 'Please fill in all required fields.';
        status.classList.add('err');
        return;
      }

      btn.disabled = true;

      try {
        const resp = await fetch('/api/router?action=contact_form', {
          method: 'POST',
          headers: { 'Content-Type':'application/json' },
          body: JSON.stringify(data)
        });
        const j = await resp.json().catch(()=>({}));

        if (!resp.ok || j.ok === false) throw 0;

        status.textContent = 'Thank you! Your message has been sent.';
        status.classList.add('ok');
        form.reset();
      } catch {
        status.textContent = 'Message failed to send. Please try again.';
        status.classList.add('err');
      } finally {
        btn.disabled = false;
      }
    });
  })();
  </script>

</body>
</html>
